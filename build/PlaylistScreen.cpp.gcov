        -:    0:Source:/home/duong/MediaPlayerApp/src/views/PlaylistScreen.cpp
        -:    0:Graph:/home/duong/MediaPlayerApp/build/CMakeFiles/RunTests.dir/src/views/PlaylistScreen.cpp.gcno
        -:    0:Data:/home/duong/MediaPlayerApp/build/CMakeFiles/RunTests.dir/src/views/PlaylistScreen.cpp.gcda
        -:    0:Runs:6
        -:    1:// Project includes
        -:    2:#include "views/PlaylistScreen.h"
        -:    3:#include "utils/Logger.h"
        -:    4:
        -:    5:namespace media_player 
        -:    6:{
        -:    7:namespace views 
        -:    8:{
        -:    9:
    #####:   10:PlaylistScreen::PlaylistScreen(std::shared_ptr<controllers::PlaylistController> playlistController)
    #####:   11:    : m_playlistController(playlistController)
    #####:   12:    , m_selectedPlaylistIndex(-1)
    #####:   13:    , m_isVisible(false)
        -:   14:{
    #####:   15:    LOG_INFO("PlaylistScreen created");
    #####:   16:}
        -:   17:
    #####:   18:PlaylistScreen::~PlaylistScreen() 
        -:   19:{
    #####:   20:    LOG_INFO("PlaylistScreen destroyed");
    #####:   21:}
------------------
_ZN12media_player5views14PlaylistScreenD0Ev:
    #####:   18:PlaylistScreen::~PlaylistScreen() 
        -:   19:{
        -:   20:    LOG_INFO("PlaylistScreen destroyed");
    #####:   21:}
------------------
_ZN12media_player5views14PlaylistScreenD2Ev:
    #####:   18:PlaylistScreen::~PlaylistScreen() 
        -:   19:{
    #####:   20:    LOG_INFO("PlaylistScreen destroyed");
    #####:   21:}
------------------
        -:   22:
    #####:   23:void PlaylistScreen::show() 
        -:   24:{
    #####:   25:    m_isVisible = true;
    #####:   26:    refreshPlaylistList();
    #####:   27:    LOG_INFO("PlaylistScreen shown");
    #####:   28:}
        -:   29:
    #####:   30:void PlaylistScreen::hide() 
        -:   31:{
    #####:   32:    m_isVisible = false;
    #####:   33:    LOG_INFO("PlaylistScreen hidden");
    #####:   34:}
        -:   35:
    #####:   36:void PlaylistScreen::update() 
        -:   37:{
    #####:   38:    if (!m_isVisible) 
        -:   39:    {
    #####:   40:        return;
        -:   41:    }
        -:   42:    
    #####:   43:    displayPlaylists();
        -:   44:}
        -:   45:
    #####:   46:bool PlaylistScreen::isVisible() const 
        -:   47:{
    #####:   48:    return m_isVisible;
        -:   49:}
        -:   50:
    #####:   51:void PlaylistScreen::createNewPlaylist(const std::string& name) 
        -:   52:{
    #####:   53:    if (m_playlistController->createPlaylist(name)) 
        -:   54:    {
    #####:   55:        LOG_INFO("Playlist created: " + name);
    #####:   56:        refreshPlaylistList();
        -:   57:    }
        -:   58:    else 
        -:   59:    {
    #####:   60:        LOG_ERROR("Failed to create playlist: " + name);
        -:   61:    }
    #####:   62:}
        -:   63:
    #####:   64:void PlaylistScreen::deleteSelectedPlaylist() 
        -:   65:{
    #####:   66:    if (m_selectedPlaylistIndex < 0 || m_selectedPlaylistIndex >= static_cast<int>(m_playlists.size())) 
        -:   67:    {
    #####:   68:        return;
        -:   69:    }
        -:   70:    
    #####:   71:    const auto& playlist = m_playlists[m_selectedPlaylistIndex];
        -:   72:    
    #####:   73:    if (m_playlistController->deletePlaylist(playlist.getId())) 
        -:   74:    {
    #####:   75:        LOG_INFO("Playlist deleted: " + playlist.getName());
    #####:   76:        m_selectedPlaylistIndex = -1;
    #####:   77:        refreshPlaylistList();
        -:   78:    }
        -:   79:}
        -:   80:
    #####:   81:void PlaylistScreen::renameSelectedPlaylist(const std::string& newName) 
        -:   82:{
    #####:   83:    if (m_selectedPlaylistIndex < 0 || m_selectedPlaylistIndex >= static_cast<int>(m_playlists.size())) 
        -:   84:    {
    #####:   85:        return;
        -:   86:    }
        -:   87:    
    #####:   88:    const auto& playlist = m_playlists[m_selectedPlaylistIndex];
        -:   89:    
    #####:   90:    if (m_playlistController->renamePlaylist(playlist.getId(), newName)) 
        -:   91:    {
    #####:   92:        LOG_INFO("Playlist renamed to: " + newName);
    #####:   93:        refreshPlaylistList();
        -:   94:    }
        -:   95:}
        -:   96:
    #####:   97:void PlaylistScreen::selectPlaylist(size_t index) 
        -:   98:{
    #####:   99:    if (index < m_playlists.size()) 
        -:  100:    {
    #####:  101:        m_selectedPlaylistIndex = index;
    #####:  102:        LOG_INFO("Playlist selected: " + m_playlists[index].getName());
        -:  103:    }
    #####:  104:}
        -:  105:
    #####:  106:void PlaylistScreen::viewPlaylistDetails() 
        -:  107:{
    #####:  108:    if (m_selectedPlaylistIndex < 0 || m_selectedPlaylistIndex >= static_cast<int>(m_playlists.size())) 
        -:  109:    {
    #####:  110:        return;
        -:  111:    }
        -:  112:    
    #####:  113:    const auto& playlist = m_playlists[m_selectedPlaylistIndex];
    #####:  114:    auto items = m_playlistController->getPlaylistItems(playlist.getId());
        -:  115:    
    #####:  116:    LOG_INFO("Playlist: " + playlist.getName());
    #####:  117:    LOG_INFO("Items: " + std::to_string(items.size()));
        -:  118:    
    #####:  119:    for (size_t i = 0; i < items.size(); ++i) 
        -:  120:    {
    #####:  121:        LOG_INFO(std::to_string(i + 1) + ". " + items[i].getFileName());
        -:  122:    }
    #####:  123:}
        -:  124:
    #####:  125:void PlaylistScreen::playPlaylist() 
        -:  126:{
    #####:  127:    if (m_selectedPlaylistIndex < 0 || m_selectedPlaylistIndex >= static_cast<int>(m_playlists.size())) 
        -:  128:    {
    #####:  129:        return;
        -:  130:    }
        -:  131:    
    #####:  132:    const auto& playlist = m_playlists[m_selectedPlaylistIndex];
        -:  133:    
        -:  134:    // TODO: Add playlist to queue and start playback
    #####:  135:    LOG_INFO("Play playlist: " + playlist.getName());
        -:  136:}
        -:  137:
    #####:  138:void PlaylistScreen::addPlaylistToQueue() 
        -:  139:{
    #####:  140:    if (m_selectedPlaylistIndex < 0 || m_selectedPlaylistIndex >= static_cast<int>(m_playlists.size())) 
        -:  141:    {
    #####:  142:        return;
        -:  143:    }
        -:  144:    
    #####:  145:    const auto& playlist = m_playlists[m_selectedPlaylistIndex];
        -:  146:    
        -:  147:    // TODO: Add all playlist items to queue
    #####:  148:    LOG_INFO("Add playlist to queue: " + playlist.getName());
        -:  149:}
        -:  150:
    #####:  151:void PlaylistScreen::refreshPlaylistList() 
        -:  152:{
    #####:  153:    m_playlists = m_playlistController->getAllPlaylists();
    #####:  154:}
        -:  155:
    #####:  156:void PlaylistScreen::displayPlaylists() 
        -:  157:{
    #####:  158:    LOG_DEBUG("Displaying " + std::to_string(m_playlists.size()) + " playlists");
        -:  159:    
    #####:  160:    for (size_t i = 0; i < m_playlists.size(); ++i) 
        -:  161:    {
    #####:  162:        const auto& playlist = m_playlists[i];
    #####:  163:        std::string marker = (static_cast<int>(i) == m_selectedPlaylistIndex) ? ">" : " ";
        -:  164:        
    #####:  165:        LOG_DEBUG(marker + " " + std::to_string(i + 1) + ". " + 
        -:  166:                  playlist.getName() + " (" + 
        -:  167:                  std::to_string(playlist.getItemCount()) + " items)");
    #####:  168:    }
    #####:  169:}
        -:  170:
        -:  171:} // namespace views
        -:  172:} // namespace media_player
