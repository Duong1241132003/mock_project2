        -:    0:Source:/home/duong/MediaPlayerApp/inc/models/QueueModel.h
        -:    0:Graph:/home/duong/MediaPlayerApp/build/CMakeFiles/RunTests.dir/tests/controllers/PlaybackControllerTest.cpp.gcno
        -:    0:Data:/home/duong/MediaPlayerApp/build/CMakeFiles/RunTests.dir/tests/controllers/PlaybackControllerTest.cpp.gcda
        -:    0:Runs:6
        -:    1:#ifndef QUEUE_MODEL_H
        -:    2:#define QUEUE_MODEL_H
        -:    3:
        -:    4:// System includes
        -:    5:#include <vector>
        -:    6:#include <optional>
        -:    7:#include <memory>
        -:    8:
        -:    9:// Project includes
        -:   10:#include "MediaFileModel.h"
        -:   11:
        -:   12:namespace media_player 
        -:   13:{
        -:   14:namespace models 
        -:   15:{
        -:   16:
        -:   17:enum class RepeatMode { None, LoopOne, LoopAll };
        -:   18:
        -:   19:class QueueModel 
        -:   20:{
        -:   21:public:
       18:   22:    QueueModel() = default;
        -:   23:    
        -:   24:    // Queue operations
        -:   25:    void addToEnd(const MediaFileModel& media);
        -:   26:    void addNext(const MediaFileModel& media);
        -:   27:    void addAt(const MediaFileModel& media, size_t position);
        -:   28:    
        -:   29:    bool removeAt(size_t index);
        -:   30:    bool removeByPath(const std::string& filePath);
        -:   31:    void clear();
        -:   32:    
        -:   33:    // Navigation
        -:   34:    std::optional<MediaFileModel> getCurrentItem() const;
        -:   35:    std::optional<MediaFileModel> getNextItem() const;
        -:   36:    std::optional<MediaFileModel> getPreviousItem() const;
        -:   37:    std::optional<MediaFileModel> getItemAt(size_t index) const;
        -:   38:    
        -:   39:    bool moveToNext();
        -:   40:    bool moveToPrevious();
        -:   41:    bool jumpTo(size_t index);
        -:   42:    
        -:   43:    // Query
        -:   44:    size_t getCurrentIndex() const 
        -:   45:    { 
        -:   46:        return m_currentIndex; 
        -:   47:    }
        -:   48:    
        -:   49:    size_t size() const 
        -:   50:    { 
        -:   51:        return m_items.size(); 
        -:   52:    }
        -:   53:    
        -:   54:    bool isEmpty() const 
        -:   55:    { 
        -:   56:        return m_items.empty(); 
        -:   57:    }
        -:   58:    
        -:   59:    bool hasNext() const;
        -:   60:    bool hasPrevious() const;
        -:   61:    
        -:   62:    std::vector<MediaFileModel> getAllItems() const 
        -:   63:    { 
        -:   64:        return m_items; 
        -:   65:    }
        -:   66:    /** Items in playback order (shuffle order when shuffle on, else same as getAllItems). */
        -:   67:    std::vector<MediaFileModel> getItemsInPlaybackOrder() const;
        -:   68:    
        -:   69:    // Reorder
        -:   70:    bool moveItem(size_t fromIndex, size_t toIndex);
        -:   71:    
        -:   72:    // Modes
        -:   73:    void setShuffleMode(bool enabled);
        -:   74:    bool isShuffleEnabled() const 
        -:   75:    { 
        -:   76:        return m_shuffleEnabled; 
        -:   77:    }
        -:   78:    
        -:   79:    void setRepeatMode(RepeatMode mode);
        -:   80:    RepeatMode getRepeatMode() const 
        -:   81:    { 
        -:   82:        return m_repeatMode; 
        -:   83:    }
        -:   84:    bool isLoopOneEnabled() const 
        -:   85:    { 
        -:   86:        return m_repeatMode == RepeatMode::LoopOne; 
        -:   87:    }
        -:   88:    bool isLoopAllEnabled() const 
        -:   89:    { 
        -:   90:        return m_repeatMode == RepeatMode::LoopAll; 
        -:   91:    }
        -:   92:    /** True when LoopOne or LoopAll (for backward compatibility). */
        -:   93:    bool isRepeatEnabled() const 
        -:   94:    { 
        -:   95:        return m_repeatMode != RepeatMode::None; 
        -:   96:    }
        -:   97:    
        -:   98:private:
        -:   99:    void updateShuffleOrder();
        -:  100:    size_t getActualIndex(size_t logicalIndex) const;
        -:  101:    
        -:  102:    std::vector<MediaFileModel> m_items;
        -:  103:    std::vector<size_t> m_shuffleOrder;
        -:  104:    size_t m_currentIndex = 0;
        -:  105:    bool m_shuffleEnabled = false;
        -:  106:    RepeatMode m_repeatMode = RepeatMode::None;
        -:  107:};
        -:  108:
        -:  109:} // namespace models
        -:  110:} // namespace media_player
        -:  111:
        -:  112:#endif // QUEUE_MODEL_H
